<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="./resources/7seg.svg" sizes="any" type="image/svg+xml">
  <title>mpf--1</title>

  <link rel="stylesheet" href="resources/style.css" />
  <script src="https://cdn.jsdelivr.net/gh/DrGoldfire/Z80.js@master/Z80.js"></script>
  <script src="app.js"></script>
</head>

<body>
  <div class="window" id="window">

    <div class="led-group">
      <div class="svg-7seg-container">
        <object type="image/svg+xml" id="svg-object-add3" data="./resources/7seg.svg"></object>
        <object type="image/svg+xml" id="svg-object-add2" data="./resources/7seg.svg"></object>
        <object type="image/svg+xml" id="svg-object-add1" data="./resources/7seg.svg"></object>
        <object type="image/svg+xml" id="svg-object-add0" data="./resources/7seg.svg"></object>
        <object type="image/svg+xml" id="svg-object-data1" data="./resources/7seg.svg"></object>
        <object type="image/svg+xml" id="svg-object-data0" data="./resources/7seg.svg"></object>
      </div>

      <div class="led-stack">
        <div class="led led-green" id="led-green"></div>
        <div class="led led-red" id="led-red"></div>
      </div>
    </div>
    <div id="printer-scroll-box" style="
    width: 205px;
    height: 80px; 
    overflow-y: auto; 
    background: #ffffff; 
    border: 3px solid #222; 
    position: absolute; 
    left: 300px;
    top: 5px; 
    z-index: 100;
    box-shadow: inset 0 0 5px #999;">

      <canvas id="mtpScreen" width="200" height="9000" style="
      background: #fff; 
      image-rendering: pixelated; 
      display: block; 
      filter: contrast(150%);">
      </canvas>
    </div>

    <div class="control-panel-right">

      <div class="button-grid" id="control-buttons">
        <!-- Button A: Audio In (col 1, row 1) -->
        <div class="button-svg-container btn-A" onclick="handleAudioIn()" title="Audio In File&#10;Hex or WAV">
          <svg class="button-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" fill="#bbb" stroke="#888" stroke-width="2" id="power-button-circle" />
            <text x="12" y="16" font-size="12" text-anchor="middle" fill="#333">A</text>
          </svg>
        </div>

        <!-- Button B: Audio Record (col 2, row 1) -->
        <div class="button-svg-container btn-B" onclick="handleAudioRecord()" title="Audio Record&#10;Start/Stop">
          <svg class="button-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" fill="#bbb" stroke="#888" stroke-width="2" />
            <text x="12" y="16" font-size="12" text-anchor="middle" fill="#333">B</text>
          </svg>
        </div>

        <!-- Button C: Toggle Keyboard (col 3, row 1) -->
        <div class="button-svg-container btn-C" onclick="toggleKeyboard()"
          title="Toggle Keyboard&#10;Switch keyboard image">
          <svg class="button-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" fill="#bbb" stroke="#888" stroke-width="2" />
            <text x="12" y="16" font-size="12" text-anchor="middle" fill="#333">C</text>
          </svg>
        </div>

        <!-- Button D: Power (col 3, row 2) -->
        <div class="button-svg-container btn-D" onclick="handlePower()" title="Power Off/ON&#10;System Control">
          <svg class="button-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" fill="#bbb" stroke="#888" stroke-width="2" />
            <text x="12" y="16" font-size="12" text-anchor="middle" fill="#333">D</text>
          </svg>
        </div>
      </div>

      <div id="future-text-area">
      </div>
    </div>
  </div>

  <div class="image-container">
    <img src="https://www.robkalmeijer.nl/techniek/computer/mpf1/mpf-1b_keyboard.jpg" id="keyboard-image" />
    <div class="circle" id="circle"></div>
  </div>
  <script>
    const keyboardImage = document.getElementById('keyboard-image');
    const circle = document.getElementById('circle');
    keyboardImage.addEventListener('mousemove', (e) => {
      const rect = keyboardImage.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      // Position relative to image container
      moveCircle(rect.left + x, rect.top + y, 1);
    });
    keyboardImage.addEventListener('mouseleave', () => {
      circle.style.display = 'none';
    });
  </script>


</body>

</html>